[gd_scene load_steps=12 format=3 uid="uid://ofdotmbw4jkx"]

[ext_resource type="PackedScene" uid="uid://dlo5qcfkkb5ti" path="res://scenes/Characters/Fighter.tscn" id="1_cukm7"]
[ext_resource type="Script" path="res://scripts/player.gd" id="2_7jbn1"]
[ext_resource type="PackedScene" uid="uid://bq3tmfq3mncd8" path="res://scenes/Characters/Evolutions/Specials/BaseSpecialAttack.tscn" id="3_3foic"]
[ext_resource type="Shader" path="res://resources/shaders/PlayerColor.gdshader" id="3_pu3bk"]
[ext_resource type="Script" path="res://scenes/Characters/Evolutions/Specials/SpecialWeeb.gd" id="4_1jg0m"]
[ext_resource type="PackedScene" uid="uid://bqjyjdg2uma5y" path="res://scenes/Menus/GameUI/character_pointer.tscn" id="6_54gyb"]
[ext_resource type="PackedScene" uid="uid://c1l3mcyoxc0q" path="res://resources/images/characters/playerAnimations.tscn" id="7_02yp1"]
[ext_resource type="PackedScene" uid="uid://bxby8t42ku636" path="res://scenes/Characters/Elements/hitParticles.tscn" id="8_et6l4"]
[ext_resource type="Texture2D" uid="uid://dbyqxrfhania" path="res://resources/images/objects/coin.png" id="9_8u645"]
[ext_resource type="PackedScene" uid="uid://uslvtp64xdd7" path="res://scenes/Utilities/TrailEffect.tscn" id="10_jt582"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_72mm4"]
resource_local_to_scene = true
shader = ExtResource("3_pu3bk")
shader_parameter/in_hit_effect = false
shader_parameter/base_color = Color(0.32549, 0.576471, 0.772549, 1)
shader_parameter/replace_color = Color(1, 0, 0, 1)
shader_parameter/replace_threshold = 0.15

[node name="PlayerCharacter" groups=["player"] instance=ExtResource("1_cukm7")]
script = ExtResource("2_7jbn1")
current_evolution = 0
speed = 600.0
air_speed = 600.0
max_fall_speed = 1500.0
jump_velocity = 600.0
jump_max_duration = 0.2
fall_speed_multiplier = 2.5
attack_damage = 1
knockback_damage_threshold = 1
attack_intensity = 1
attack_duration = 0.125
attack_wind_up = 0.0
attack_recovery = 0.3
initial_fall_speed = 100.0
knockback_multiplier = 1.0
knockback_interp_factor = 0.075
stun_time = 0.3

[node name="Sprite2D" parent="." index="0"]
material = SubResource("ShaderMaterial_72mm4")
position = Vector2(0, 40)
rotation = 0.174533
scale = Vector2(0.5, 0.5)
animation = &"attack"
offset = Vector2(0, -100)

[node name="CollisionShape2D" parent="." index="1"]
position = Vector2(-5.5, -5)

[node name="AttackLocation" parent="." index="2"]
position = Vector2(48, 0)

[node name="JumpTimer" type="Timer" parent="." index="5"]
one_shot = true

[node name="SpecialAttack" parent="." index="6" instance=ExtResource("3_3foic")]
script = ExtResource("4_1jg0m")
dash_speed = 2000.0
dash_duration = 0.125
dash_cooldown = 0.25

[node name="CharacterPointer" parent="." index="7" instance=ExtResource("6_54gyb")]
position = Vector2(0, -100)

[node name="AnimationPlayer" parent="." index="8" instance=ExtResource("7_02yp1")]

[node name="HitParticles" parent="." index="9" instance=ExtResource("8_et6l4")]
position = Vector2(0, 0)
lifetime = 1.0
texture = ExtResource("9_8u645")

[node name="TrailEffect" parent="." index="10" instance=ExtResource("10_jt582")]
self_modulate = Color(1, 1, 1, 0.2)
width = 35.0
joint_mode = 2
max_points = 70

[node name="StunTimer" type="Timer" parent="." index="11"]
one_shot = true

[node name="AudioHit" type="AudioStreamPlayer" parent="." index="12"]

[node name="AudioEvolve" type="AudioStreamPlayer" parent="." index="13"]

[connection signal="fighter_hit" from="." to="CharacterPointer" method="take_damage"]
[connection signal="fighter_killed_opponent" from="." to="." method="_on_fighter_killed_opponent"]
[connection signal="timeout" from="JumpTimer" to="." method="_on_jump_timer_timeout"]
[connection signal="timeout" from="StunTimer" to="." method="_on_stun_timer_timeout"]
